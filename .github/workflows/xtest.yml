name: X-Tests
on: [pull_request]
jobs:
  test:
    timeout-minutes: 60
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - uses: actions/setup-node@v2
      with:
        node-version: '16.x'
    # todo: install and activate virtual env for python
    - name: Build TDF3
      run: |-
        cd tdf3-js
        npm ci
        npm pack
    - name: Install dependencies
      run: |-
        cd xtest
        npm ci
        npm i ../tdf3-js/tdf3-js-4.1.8.tgz
        pip3 install -r requirements.txt
    - name: Run tests
      run: |-
        cd xtest
        npm run test
    # - uses: actions/upload-artifact@v2
    #   if: always()
    #   with:
    #     name: playwright-test-results
    #     path: vulnerability/test-results/
