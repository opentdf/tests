import {expect, test} from '@playwright/test';
import {constants} from "http2";

// @ts-ignore
const {authority, platform_url} = JSON.parse(process.env.SERVER_DATA);

test('basic healthz test', async ({request}) => {
    const response = await request.get(`${platform_url}/healthz`, {});
    expect(response.ok()).toBeTruthy();
});

test('basic attributes test', async ({request}) => {
    const response = await request.get(`${platform_url}/attributes`, {});
    expect(response.status()).toBe(constants.HTTP_STATUS_UNAUTHORIZED);
});

test('basic entitlements test', async ({request}) => {
    const response = await request.get(`${platform_url}/entitlements`, {});
    expect(response.status()).toBe(constants.HTTP_STATUS_UNAUTHORIZED);
});

test('basic keycloak test', async ({request}) => {
    const response = await request.get(`${authority}`, {});
    expect(response.ok()).toBeTruthy();
});
